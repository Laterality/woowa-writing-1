# 한 달. 한 달!?

바뀐 일상에 익숙해지는 동안 한 달이 지났다. 낯설었던 사람들과 친해지는 동안 계절도 바뀌었다. 짧은 기간동안 기대 이상으로 많은 것을 배웠다. 단순히 책이나 강의를 보고 들은 것이 아니다. 정해준 방향을 따라가며 온전히 내 경험으로 만든 것이다. 그 중 나의 프로그래밍 경험을 크게 바꾼 몇 가지를 되새겨봤다.

## 클린 코드

> Any fool can write code that a computer can understand. Good programmers write code that humans can understand.
>
> 컴퓨터가 이해할 수 있는 코드는 바보라도 작성할 수 있다. 좋은 프로그래머는 사람이 이해할 수 있는 코드를 작성한다.
>
> \- 마틴 파울러, 2008<sup>[[1]][martin-fowler-quote]</sup>

지식이 모든 문제를 해결해주지는 않는다. 때로는 경험이 필요한 문제도 있다고 믿고 있다. 클린 코드는 '경험이 필요한 문제' 중 하나다. 코드가 '클린'한지를 구분짓는 명확한 기준은 없다. 오직 몇 가지 지침들과 모범 사례들만 있다. 심지어 사례들도 단 하나의 정답이 아니다. 코드를 읽고, 개선할 방법을 찾는 것은 경험이 필요한 일이다. 지식도, 경험도 부족한 상황에서 답을 찾는 것은 쉽지 않았다.

한달 간 1, 2주마다 새로운 요구사항을 구현하는 미션을 진행했다. 각 미션마다 리뷰어가 배정됐다. 미션을 구현해서 제출하면 리뷰어로부터 구현에 대한 피드백을 받는다. 변수명부터 전체 설계에 대한 지적까지 피드백의 종류는 다양하다. 이를 반영하고 다시 피드백을 받기를 반복한다. 미션이 요구사항을 만족한다고 판단하면 리뷰어가 PR을 머지한다. 그렇게 미션 하나가 끝난다.

내가 작성한 코드를 다른 사람이 본다는 것을 의식할 수밖에 없다. 당연히 읽기 쉬워야 한다. 그런 부담은 더 좋은 결과를 만드는 힘이 됐다. 모든 과정에 신중하게 접근하게 되었다. 미션마다 합리적인 설계와 구현 방법을 고민했다. 이제, '덜' 지저분한 코드가 됐다.

## TDD

![테스트부터 작성해야 해요][img-test-first]

프로그램은 문제를 해결하는 도구이다. 결국 모든 프로그램에는 해결해야 하는 문제가 있다. 이것이 요구사항이 되고, 이를 만족하는 프로그램을 작성해야 한다. 프로그램을 작성하기 전에 요구사항을 분석하는 이유이기도 할 것이다. 어떤 문제를 해결해야 하는지 명확히 파악해야 하니까.

대부분, 요구사항은 복잡하다. 그래서 의도치 않은 방향으로 구현하게 되기도 한다. 자신도 모르는 사이에. 때문에 구현 전에 작성하는 테스트는 다음과 같은 역할을 할 수 있다.

* 복잡한 요구사항이라는 사막에서 길을 알려주는 나침반
* 요구사항 속의 요구사항

앞서 말했듯, 요구사항이 복잡하면 길을 잃기 쉽다. 문제는 길을 잃어가고 있음을 자각하지 못하기도 한다는 것이다. 지금 구현하는 코드가 실행되는 것은 나중의 일이다. 잘못된 코드를 작성해도 그걸 깨닫는 것은 언제가 될지 알 수 없다. 테스트는 코드가 배포되기 전에 문제점을 찾을 수 있는 가장 빠른 방법이다.

테스트도 구현 코드를 사용하는 하나의 클라이언트다. 즉, 테스트하기 어려운 코드는 실제로 이 코드를 사용하기도 어려울 것이라는 의미다. 이 코드가 정말 최선인지 고민해봐야 한다는 신호이기도 하다. 또한 테스트는 지금 작성하는 하나의 모듈에 대한 요구사항이 되기도 한다. 프로그램의 요구사항은 해결해야 할 가장 큰 문제를 기술한다. 그 안의 작은 문제들을 어떻게 풀어야 하는지는 알려주지 않는다. 테스트는 이 문제들을 어떻게 풀어나가야 할 지를 기술하는 역할도 한다.

나쁜 코드는 암세포와도 같다, 코드와 개발자 모두에게. 빠르게 확산되며 늦게 발견할수록 수습이 어려워진다. 잘 작성된 테스트는 우리의 삶과 코드를 윤택하게 만드는 좋은 친구다. 빠를수록 좋다. 테스트도, 퇴근도.

## 페어 프로그래밍

![페어 프로그래밍][img-pair-programming]

둘이서 '같이' 프로그래밍을 한다. 처음에는 정말 이런 걸 하나 싶었다. TDD보다도 의심스러웠다. 이런 방식이 어떤 득이 있는건가 하는 생각이 들었다. 사실, 아직도 그런 생각을 떨치지 못했다.

세상에 똑같은 생각을 하는 사람은 없다. 같은 기능도 구현하는 방법은 다양하다. 설계 또한 마찬가지일 것이다. 페어 프로그래밍의 강점은 여기에서 비롯된 것이 아닌가 싶다. 내가 최선이라고 생각한 방법은 최선이 아닐 수도 있다. 옆에서 나를 지켜보는 사람은 이런 순간에 가차없는 일침을 날려줄 수 있다. "그 방법은 별로인 것 같은데요?" 라고.

한 달간 세 명의 서로 다른 사람들과 페어 프로그래밍을 했다. 매번 새로운 경험들이었다. 세 명의 페어에게 가장 고마웠던 점은 계속해서 질문해준 것이다. 나 또한 계속해서 질문했다. 내 생각을 일일이 말하지 않아도 알아주면 좋겠다. 하지만 내 옆에 있는 사람에게는 쉽지 않은 일이다. 이 관계에서 가장 중요한 것은 질문이라고 생각한다. 질문은 페어와 나의 생각을 동기화하는 과정이다. 옆사람의 코드가 무슨 의도인지. 내가 구현하려는 방향에 이견이 없는지. 서로 시각을 공유하면서 더 넓은 시야로 앞을 볼 수 있게 한다.

세상에 똑같은 생각을 하는 사람은 없다. 서로 의견을 조율해가며 코드를 작성한다. 하지만 의견 차이가 좁혀지지 않는 순간이 분명 온다. 이런 상황을 마법처럼 해결해주는 방법은 세상에 없다. 그걸 경험으로 깨닫는 것이 남은 7개월 간 내게 남겨진 과제이다.

[martin-fowler-quote]: https://en.wikiquote.org/wiki/Martin_Fowler

[img-test-first]: img/test_first!.png
[img-pair-programming]: img/pair-programming.jpg